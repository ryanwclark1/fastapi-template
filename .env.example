# ==============================================================================
# FastAPI Template Â· Local Development Environment
# ==============================================================================
# Copy this file to `.env` and tweak values for your workstation. The defaults
# assume you're running supporting services via deployment/docker/docker-compose.yml
# but keeping the FastAPI app on the host. Switch `localhost` to the container
# name (db, redis, rabbitmq, alloy) when you run the API inside Docker.
#
# Quick start:
#   1. cp .env.example .env
#   2. docker compose -f deployment/docker/docker-compose.yml up db redis rabbitmq
#   3. uv run fastapi dev example_service/main.py
# ==============================================================================

# ------------------------------------------------------------------------------
# Application Settings (APP_)
# ------------------------------------------------------------------------------
APP_SERVICE_NAME=example-service
APP_TITLE=Example Service API
APP_DESCRIPTION=FastAPI service template following standard architecture patterns
APP_VERSION=1.0.0
APP_ENVIRONMENT=development
APP_DEBUG=true
APP_HOST=0.0.0.0
APP_PORT=8000
APP_API_PREFIX=/api/v1
APP_DOCS_URL=/docs
APP_REDOC_URL=/redoc
APP_OPENAPI_URL=/openapi.json
APP_DISABLE_DOCS=false
APP_ROOT_PATH=
APP_ROOT_PATH_IN_SERVERS=true
APP_CORS_ORIGINS=["http://localhost:3000"]
APP_CORS_ALLOW_CREDENTIALS=true
APP_CORS_ALLOW_METHODS=["*"]
APP_CORS_ALLOW_HEADERS=["*"]
APP_ENABLE_REQUEST_SIZE_LIMIT=true
APP_REQUEST_SIZE_LIMIT=10485760
APP_ENABLE_RATE_LIMITING=false
APP_RATE_LIMIT_PER_MINUTE=120
APP_RATE_LIMIT_WINDOW_SECONDS=60
APP_REDIRECT_SLASHES=true
APP_SEPARATE_INPUT_OUTPUT_SCHEMAS=true

# Debug Middleware Configuration (development/troubleshooting)
# Enables comprehensive debugging with distributed tracing support
# Adds trace IDs, span IDs, and detailed request/response logging
# Performance: < 1ms overhead per request
APP_ENABLE_DEBUG_MIDDLEWARE=false
APP_DEBUG_LOG_REQUESTS=true
APP_DEBUG_LOG_RESPONSES=true
APP_DEBUG_LOG_TIMING=true
APP_DEBUG_HEADER_PREFIX=X-

# N+1 Query Detection Configuration (development/testing)
# Monitors SQLAlchemy query patterns to detect and prevent N+1 query problems
# Helps identify performance bottlenecks in database access patterns
# Recommended: enabled in development, disabled in production (performance overhead)
APP_ENABLE_N_PLUS_ONE_DETECTION=false
N_PLUS_ONE_THRESHOLD=10
N_PLUS_ONE_LOG_SLOW_QUERIES=true
N_PLUS_ONE_SLOW_QUERY_THRESHOLD=1.0
N_PLUS_ONE_ENABLE_DETAILED_LOGGING=false

# ------------------------------------------------------------------------------
# Internationalization Settings (I18N_)
# ------------------------------------------------------------------------------
# Multi-language support with automatic locale detection
# Detection priority: user preference > Accept-Language header > query param > cookie
# Requires translation files in your application
I18N_ENABLED=false
I18N_DEFAULT_LOCALE=en
I18N_SUPPORTED_LOCALES=["en", "es", "fr"]
I18N_COOKIE_NAME=locale
I18N_COOKIE_MAX_AGE_DAYS=30
I18N_QUERY_PARAM=lang
I18N_USE_ACCEPT_LANGUAGE=true
I18N_USE_USER_PREFERENCE=true
I18N_USE_QUERY_PARAM=true
I18N_USE_COOKIE=true

# ------------------------------------------------------------------------------
# Enhanced Security Headers Configuration (SECURITY_)
# ------------------------------------------------------------------------------
# Adds HTTP security headers to protect against common web vulnerabilities
# Implements OWASP best practices for XSS, clickjacking, MIME sniffing, etc.
# Reference: https://owasp.org/www-project-secure-headers/
# Performance: Pure ASGI implementation with minimal overhead (< 0.5ms)

# HSTS (HTTP Strict Transport Security) - Forces HTTPS connections
# Recommended: enabled in production, disabled in development
SECURITY_ENABLE_HSTS=true
SECURITY_HSTS_MAX_AGE=31536000
SECURITY_HSTS_INCLUDE_SUBDOMAINS=true
SECURITY_HSTS_PRELOAD=false

# CSP (Content Security Policy) - Prevents XSS and injection attacks
# Customize CSP directives based on your application needs
SECURITY_ENABLE_CSP=true
SECURITY_CSP_DEFAULT_SRC="'self'"
SECURITY_CSP_SCRIPT_SRC="'self'"
SECURITY_CSP_STYLE_SRC="'self' 'unsafe-inline'"

# Frame Options - Prevents clickjacking attacks
SECURITY_ENABLE_FRAME_OPTIONS=true
SECURITY_FRAME_OPTIONS=DENY

# XSS Protection - Enables browser XSS filtering
SECURITY_ENABLE_XSS_PROTECTION=true

# Content Type Options - Prevents MIME type sniffing
SECURITY_ENABLE_CONTENT_TYPE_OPTIONS=true

# Referrer Policy - Controls referrer information
SECURITY_ENABLE_REFERRER_POLICY=true
SECURITY_REFERRER_POLICY=strict-origin-when-cross-origin

# Permissions Policy - Controls browser features (camera, geolocation, etc.)
SECURITY_ENABLE_PERMISSIONS_POLICY=true

# Server Header - Customize or remove server identification header
# Set to empty string to remove, or custom value to replace
# Recommended: false (remove) or custom value for production
SECURITY_SERVER_HEADER=false

# Environment-aware settings (auto-detects production/development)
SECURITY_ENVIRONMENT=production

# ------------------------------------------------------------------------------
# Multi-Tenancy Configuration (TENANT_)
# ------------------------------------------------------------------------------
# Tenant isolation and context management for multi-tenant applications
# Supports tenant identification from headers, subdomains, or JWT claims
# Optional: only needed for multi-tenant deployments

# Enable multi-tenancy features
TENANT_ENABLED=false

# Tenant identification strategy: "header", "subdomain", "jwt", or "multi"
TENANT_STRATEGY=header

# Tenant header name (for header strategy)
# For Accent-Auth integration, use "Accent-Tenant"
TENANT_HEADER_NAME=Accent-Tenant

# Subdomain configuration (for subdomain strategy)
# TENANT_BASE_DOMAIN=example.com
# TENANT_SUBDOMAIN_PATTERN=^([a-z0-9-]+)

# JWT claim name (for JWT strategy)
TENANT_JWT_CLAIM_NAME=tenant_id

# Tenant validation (optional)
# TENANT_VALIDATION_ENABLED=true
# TENANT_VALIDATION_ENDPOINT=/api/tenants/{tenant_id}/validate

# ------------------------------------------------------------------------------
# Database Settings (DB_)
# ------------------------------------------------------------------------------
DB_ENABLED=true
DB_DSN=postgresql+psycopg://postgres:postgres@localhost:5432/example_service
# For dockerized FastAPI workloads, point at the compose service name instead:
# DB_DSN=postgresql+psycopg://postgres:postgres@db:5432/example_service
DB_APPLICATION_NAME=example-service
DB_ECHO=false
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30.0
DB_POOL_RECYCLE=1800
DB_CONNECT_TIMEOUT=5.0
DB_PG_MIN_SIZE=1
DB_PG_MAX_SIZE=10
DB_PG_TIMEOUT=30.0
DB_STARTUP_REQUIRE_DB=true
DB_STARTUP_RETRY_ATTEMPTS=3
DB_STARTUP_RETRY_DELAY=2.0
DB_STARTUP_RETRY_TIMEOUT=60.0

# Component overrides (used when DB_DSN is not set)
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=example_service

# ------------------------------------------------------------------------------
# Redis Cache Settings (REDIS_)
# ------------------------------------------------------------------------------
REDIS_REDIS_URL=redis://localhost:6379/0
# When FastAPI runs inside docker compose, change host to `redis`
# REDIS_REDIS_URL=redis://redis:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_USERNAME=
REDIS_PASSWORD=
REDIS_KEY_PREFIX=example-service:
REDIS_DEFAULT_TTL=3600
REDIS_AUTH_TOKEN_TTL=300
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5.0
REDIS_SOCKET_CONNECT_TIMEOUT=5.0
REDIS_SOCKET_KEEPALIVE=true
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=0.5
REDIS_RETRY_TIMEOUT=10.0
REDIS_HEALTH_CHECKS_ENABLED=false
REDIS_STARTUP_REQUIRE_CACHE=false

# ------------------------------------------------------------------------------
# RabbitMQ Messaging Settings (RABBIT_)
# ------------------------------------------------------------------------------
RABBIT_ENABLED=true
RABBIT_AMQP_URI=amqp://admin:admin123@localhost:5672/
# For docker compose, point to the service name:
# RABBIT_AMQP_URI=amqp://admin:admin123@rabbitmq:5672/
RABBIT_CONNECTION_NAME=example-service-local
RABBIT_QUEUE_PREFIX=example-service
RABBIT_DEFAULT_QUEUE=tasks
RABBIT_EXCHANGE_NAME=example-service
RABBIT_EXCHANGE_TYPE=topic
RABBIT_PREFETCH_COUNT=100
RABBIT_MAX_CONSUMERS=10
RABBIT_POOL_SIZE=10
RABBIT_PUBLISHER_CONFIRMS=true
RABBIT_HEARTBEAT=60
RABBIT_RETRY_ATTEMPTS=5
RABBIT_RETRY_BACKOFF=1.0
RABBIT_GRACEFUL_TIMEOUT=15.0

# ------------------------------------------------------------------------------
# Circuit Breaker Configuration (CIRCUIT_BREAKER_)
# ------------------------------------------------------------------------------
# Implements circuit breaker pattern for resilient service communication
# Prevents cascading failures by failing fast when services are unavailable
# Provides automatic recovery with exponential backoff
#
# States:
#   - CLOSED: Normal operation, all requests pass through
#   - OPEN: Failure threshold exceeded, requests fail immediately (fail fast)
#   - HALF_OPEN: Testing recovery, limited requests allowed
#
# Use Cases:
#   - External API calls (payment gateways, third-party services)
#   - Microservice communication (service-to-service calls)
#   - Database connections in distributed systems
#   - Message broker operations
#
# Performance: Minimal overhead (< 0.1ms per call)
# Recommended: enabled for all production external service calls

# Global circuit breaker settings
CIRCUIT_BREAKER_ENABLED=true

# Failure threshold - Number of consecutive failures before opening circuit
# Recommended: 5-10 for external APIs, 3-5 for internal services
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# Recovery timeout - Seconds to wait before attempting recovery (OPEN -> HALF_OPEN)
# Recommended: 30-60s for external APIs, 10-30s for internal services
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60

# Success threshold - Successful calls needed in HALF_OPEN to close circuit
# Recommended: 2-5 (lower values allow faster recovery)
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2

# Half-open max calls - Maximum concurrent calls allowed in HALF_OPEN state
# Recommended: 1-3 (prevents overwhelming recovering services)
CIRCUIT_BREAKER_HALF_OPEN_MAX_CALLS=1

# Exponential backoff multiplier for recovery attempts
# Recommended: 1.5-2.0 (balances recovery speed vs service protection)
CIRCUIT_BREAKER_BACKOFF_MULTIPLIER=1.5

# Maximum recovery timeout - Upper bound for exponential backoff (seconds)
# Recommended: 300-600s (prevents indefinite wait times)
CIRCUIT_BREAKER_MAX_RECOVERY_TIMEOUT=300

# Enable detailed metrics collection (increases memory usage slightly)
CIRCUIT_BREAKER_ENABLE_METRICS=true

# Enable state change notifications (for monitoring/alerting)
CIRCUIT_BREAKER_ENABLE_NOTIFICATIONS=true

# Per-service circuit breaker overrides (optional)
# Format: SERVICE_NAME_CIRCUIT_BREAKER_SETTING=value
# Examples:
# PAYMENT_SERVICE_CIRCUIT_BREAKER_FAILURE_THRESHOLD=3
# PAYMENT_SERVICE_CIRCUIT_BREAKER_RECOVERY_TIMEOUT=30
# AUTH_SERVICE_CIRCUIT_BREAKER_FAILURE_THRESHOLD=10
# AUTH_SERVICE_CIRCUIT_BREAKER_RECOVERY_TIMEOUT=20

# ------------------------------------------------------------------------------
# Task Management Settings (TASK_)
# ------------------------------------------------------------------------------
# Background task execution and tracking configuration
# Supports dual backend: Redis (fast, ephemeral) or PostgreSQL (persistent)
# Provides task history, statistics, and management APIs
#
# Backend Comparison:
#   Redis:    Fast queries, TTL-based cleanup, sorted set indexes
#   Postgres: Persistent storage, JSONB flexibility, SQL queries
#
# API Endpoints (at /api/v1/tasks/*):
#   - GET /tasks - Search task history with filters
#   - GET /tasks/running - View currently executing tasks
#   - GET /tasks/stats - Aggregate statistics
#   - GET /tasks/{id} - Task details with return value/error
#   - POST /tasks/cancel - Cancel queued/running tasks
#   - GET /tasks/scheduled - View APScheduler jobs

# Result backend selection: "redis" or "postgres"
# Recommended: redis for high-throughput, postgres for audit requirements
TASK_RESULT_BACKEND=redis

# Enable task execution tracking
TASK_TRACKING_ENABLED=true

# Retention period for task history (postgres backend)
# Older records are cleaned up automatically
TASK_TRACKING_RETENTION_HOURS=24

# Redis backend settings
TASK_REDIS_RESULT_TTL_SECONDS=86400
TASK_REDIS_KEY_PREFIX=taskiq
TASK_REDIS_MAX_CONNECTIONS=10

# PostgreSQL backend settings
TASK_POSTGRES_TABLE_NAME=task_executions

# Task cancellation support
# Allows cancelling queued tasks via API
TASK_ENABLE_TASK_CANCELLATION=true

# ------------------------------------------------------------------------------
# Accent-Auth Authentication Settings (AUTH_)
# ------------------------------------------------------------------------------
# Accent-Auth service URL (required for authentication)
AUTH_SERVICE_URL=http://accent-auth:9497

# Health check integration (optional, does NOT block startup)
# When enabled, monitors accent-auth availability via /health endpoints
# The service will start and run even if accent-auth is unavailable
AUTH_HEALTH_CHECKS_ENABLED=false

# Token validation endpoint (accent-auth format, rarely needs changing)
AUTH_TOKEN_VALIDATION_ENDPOINT=/api/auth/0.1/token

# Token caching (recommended for performance)
AUTH_TOKEN_CACHE_TTL=300
AUTH_ENABLE_PERMISSION_CACHING=true
AUTH_ENABLE_ACL_CACHING=true

# HTTP headers (accent-auth standard)
AUTH_TOKEN_HEADER=X-Auth-Token
AUTH_TOKEN_SCHEME=Bearer

# Request configuration
AUTH_REQUEST_TIMEOUT=5.0
AUTH_MAX_RETRIES=3

# Service-to-service authentication (optional, for admin operations)
# Required only if using accent-auth-client library for user management
# AUTH_SERVICE_TOKEN=your-service-token
# AUTH_SERVICE_ID=example-service

# ------------------------------------------------------------------------------
# Logging Settings (LOG_)
# ------------------------------------------------------------------------------
LOG_SERVICE_NAME=example-service
LOG_LEVEL=DEBUG
LOG_JSON_LOGS=false
LOG_CONSOLE_ENABLED=true
LOG_CONSOLE_LEVEL=
LOG_FILE_ENABLED=true
LOG_FILE_PATH=logs/example-service.dev.log
LOG_FILE_MAX_BYTES=10485760
LOG_FILE_BACKUP_COUNT=5
LOG_INCLUDE_UVICORN=true
LOG_INCLUDE_REQUEST_ID=true
LOG_LOG_SLOW_REQUESTS=true
LOG_SLOW_REQUEST_THRESHOLD=1.0
LOG_CAPTURE_WARNINGS=true

# ------------------------------------------------------------------------------
# OpenTelemetry Settings (OTEL_)
# ------------------------------------------------------------------------------
OTEL_ENABLED=false
OTEL_ENDPOINT=http://localhost:4317
# When running the Alloy collector from docker compose, use:
# OTEL_ENDPOINT=http://alloy:4317
OTEL_SERVICE_NAME=example-service
OTEL_SERVICE_VERSION=1.0.0
OTEL_INSECURE=true
OTEL_SAMPLE_RATE=1.0
OTEL_INSTRUMENT_FASTAPI=true
OTEL_INSTRUMENT_HTTPX=true
OTEL_INSTRUMENT_SQLALCHEMY=true
OTEL_INSTRUMENT_PSYCOPG=true

# ------------------------------------------------------------------------------
# Backup Settings (BACKUP_)
# ------------------------------------------------------------------------------
BACKUP_ENABLED=false
BACKUP_LOCAL_DIR=./backups
BACKUP_RETENTION_DAYS=7
BACKUP_COMPRESSION=true
BACKUP_INCLUDE_BLOBS=true
# Configure these when mirroring backups into object storage
# BACKUP_S3_BUCKET=
# BACKUP_S3_ACCESS_KEY=
# BACKUP_S3_SECRET_KEY=
# BACKUP_S3_ENDPOINT_URL=http://localhost:9000
# BACKUP_S3_REGION=us-east-1
# BACKUP_S3_PREFIX=backups/database
# BACKUP_S3_RETENTION_DAYS=30

# ------------------------------------------------------------------------------
# GraphQL Configuration (GRAPHQL_)
# ------------------------------------------------------------------------------
# GraphQL API endpoint with subscriptions, playground, and query protection
# Provides an alternative to REST with strong typing and flexible querying
# Requires GraphQL dependencies to be installed (optional feature)

# Enable/disable GraphQL endpoint
GRAPHQL_ENABLED=true

# Endpoint path for GraphQL queries and mutations
GRAPHQL_PATH=/graphql

# GraphQL IDE/Playground (options: graphiql, apollo-sandbox, pathfinder, playground, false)
# Recommended: graphiql for development, false for production
GRAPHQL_GRAPHQL_IDE=graphiql
GRAPHQL_DISABLE_PLAYGROUND=false

# Query security limits (prevents DoS attacks and performance issues)
GRAPHQL_MAX_QUERY_DEPTH=10
GRAPHQL_MAX_COMPLEXITY=1000

# Pagination defaults for connection-based queries
GRAPHQL_DEFAULT_PAGE_SIZE=50
GRAPHQL_MAX_PAGE_SIZE=100

# Subscriptions (WebSocket-based real-time updates)
GRAPHQL_SUBSCRIPTIONS_ENABLED=true
GRAPHQL_SUBSCRIPTION_KEEPALIVE_INTERVAL=30.0

# Schema introspection (security consideration)
# Recommended: enabled in development, disabled in production
GRAPHQL_INTROSPECTION_ENABLED=true

# ------------------------------------------------------------------------------
# WebSocket Configuration (WS_)
# ------------------------------------------------------------------------------
# Real-time bidirectional communication via WebSocket
# Used for GraphQL subscriptions, live updates, and real-time features
# Includes connection management, heartbeat, and pub/sub support

# Connection limits
WS_MAX_CONNECTIONS=10000
WS_MAX_CONNECTIONS_PER_USER=10
WS_MAX_MESSAGE_SIZE=65536

# Heartbeat and timeout settings
WS_HEARTBEAT_INTERVAL=30.0
WS_CONNECTION_TIMEOUT=60.0
WS_CLOSE_TIMEOUT=5.0

# Redis PubSub channel configuration
WS_CHANNEL_PREFIX=ws:
WS_DEFAULT_CHANNELS=["global"]
WS_MAX_CHANNELS_PER_CONNECTION=50

# Authentication and authorization
WS_REQUIRE_AUTH=false
WS_AUTH_TIMEOUT=10.0
WS_AUTH_TOKEN_HEADER=Authorization

# Rate limiting for WebSocket messages
WS_RATE_LIMIT_ENABLED=true
WS_RATE_LIMIT_MESSAGES_PER_MINUTE=120
WS_RATE_LIMIT_BURST=20

# Message compression (reduces bandwidth, increases CPU)
WS_ENABLE_COMPRESSION=true
WS_COMPRESSION_THRESHOLD=1024

# ------------------------------------------------------------------------------
# Consul Service Discovery (CONSUL_)
# ------------------------------------------------------------------------------
# Service registration and discovery using HashiCorp Consul
# Enables dynamic service mesh and health-check based routing
# Optional: only needed for microservice deployments

# Enable Consul integration
CONSUL_ENABLED=false

# Consul agent connection
CONSUL_HOST=localhost
CONSUL_PORT=8500
CONSUL_SCHEME=http
CONSUL_TOKEN=

# Service registration
CONSUL_SERVICE_NAME=example-service
CONSUL_SERVICE_ID=
CONSUL_SERVICE_TAGS=["fastapi", "api", "example"]

# Health check configuration
CONSUL_HEALTH_CHECK_ENABLED=true
CONSUL_HEALTH_CHECK_INTERVAL=10s
CONSUL_HEALTH_CHECK_TIMEOUT=5s
CONSUL_HEALTH_CHECK_DEREGISTER_CRITICAL_AFTER=30m

# Service mesh/connect features
CONSUL_CONNECT_ENABLED=false

# ------------------------------------------------------------------------------
# Health Check Configuration (HEALTH_)
# ------------------------------------------------------------------------------
# Fine-grained per-provider health check configuration
# Controls timeouts, degradation thresholds, enabled state, and readiness criticality

# Global health check settings
HEALTH_CACHE_TTL_SECONDS=10.0
HEALTH_HISTORY_SIZE=100
HEALTH_GLOBAL_TIMEOUT=30.0

# Database health check (critical for readiness by default)
HEALTH_DATABASE__ENABLED=true
HEALTH_DATABASE__TIMEOUT=2.0
HEALTH_DATABASE__DEGRADED_THRESHOLD_MS=500.0
HEALTH_DATABASE__CRITICAL_FOR_READINESS=true

# Redis cache health check (non-critical by default)
HEALTH_CACHE__ENABLED=true
HEALTH_CACHE__TIMEOUT=1.0
HEALTH_CACHE__DEGRADED_THRESHOLD_MS=200.0
HEALTH_CACHE__CRITICAL_FOR_READINESS=false

# RabbitMQ messaging health check
HEALTH_RABBITMQ__ENABLED=true
HEALTH_RABBITMQ__TIMEOUT=5.0
HEALTH_RABBITMQ__DEGRADED_THRESHOLD_MS=1000.0
HEALTH_RABBITMQ__CRITICAL_FOR_READINESS=false

# Accent-Auth service health check
HEALTH_ACCENT_AUTH__ENABLED=true
HEALTH_ACCENT_AUTH__TIMEOUT=5.0
HEALTH_ACCENT_AUTH__DEGRADED_THRESHOLD_MS=1000.0
HEALTH_ACCENT_AUTH__CRITICAL_FOR_READINESS=false

# S3 storage health check
HEALTH_S3__ENABLED=true
HEALTH_S3__TIMEOUT=5.0
HEALTH_S3__DEGRADED_THRESHOLD_MS=2000.0
HEALTH_S3__CRITICAL_FOR_READINESS=false

# Consul service discovery health check
HEALTH_CONSUL__ENABLED=true
HEALTH_CONSUL__TIMEOUT=3.0
HEALTH_CONSUL__DEGRADED_THRESHOLD_MS=500.0
HEALTH_CONSUL__CRITICAL_FOR_READINESS=false

# ------------------------------------------------------------------------------
# Optional YAML/conf.d Overrides
# ------------------------------------------------------------------------------
# Uncomment the directories below to load layered YAML configuration before env
# variables. Files live under ./conf and are perfect for local toggles.
# APP_CONFIG_DIR=conf
# DB_CONFIG_DIR=conf
# REDIS_CONFIG_DIR=conf
# RABBIT_CONFIG_DIR=conf
# LOGGING_CONFIG_DIR=conf
# OTEL_CONFIG_DIR=conf

# Sensitive credentials should never be committed. Use your secret manager or
# keep overrides in a private, untracked .env.local if other developers share
# the same repository.

# ==============================================================================
# Documentation References
# ==============================================================================
# For detailed configuration guides and architecture documentation, see:
#
# Authentication & Authorization:
#   - docs/ACCENT_AUTH_INTEGRATION.md - Accent-Auth integration guide
#   - docs/USING_ACCENT_AUTH_CLIENT.md - Using accent-auth-client library
#   - docs/ACCENT_AUTH_LIFESPAN.md - Lifespan event management
#
# Architecture & Design:
#   - docs/FINAL_ARCHITECTURE.md - Complete system architecture
#   - docs/IMPROVEMENTS_SUMMARY.md - Recent improvements and features
#
# Optional Dependencies:
#   - docs/OPTIONAL_DEPENDENCIES.md - Feature-specific dependencies guide
#
# Quick Reference:
#   - README.md - Getting started and project overview
# ==============================================================================
# =============================================================================
# GraphQL Feature Toggles
# =============================================================================
# Control which GraphQL features are available in your API.
# All features are enabled by default except experimental ones (ai).
#
# Use cases:
# - Disable unused features to reduce API surface
# - Hide features during development/testing
# - Different features per environment (dev/staging/prod)
# - Different features per customer tier (free/pro/enterprise)
# - Gradual rollout of new features
#
# Environment variable prefix: GRAPHQL_FEATURE_
# =============================================================================

# Reminders Feature
# Provides: reminder queries, mutations, subscriptions
# Includes: CRUD operations, overdue tracking, real-time events
GRAPHQL_FEATURE_REMINDERS=true

# Tags Feature
# Provides: tag queries, mutations
# Includes: CRUD operations, popular tags, reminder associations
GRAPHQL_FEATURE_TAGS=true

# Feature Flags Feature
# Provides: feature flag queries, mutations
# Includes: CRUD operations, flag evaluation, toggle operations
GRAPHQL_FEATURE_FLAGS=true

# Files Feature
# Provides: file queries, mutations
# Includes: Presigned uploads, file management, owner filtering
GRAPHQL_FEATURE_FILES=true

# Webhooks Feature
# Provides: webhook queries, mutations
# Includes: CRUD operations, delivery tracking, testing, retries
GRAPHQL_FEATURE_WEBHOOKS=true

# Audit Logs Feature
# Provides: audit log queries (read-only)
# Includes: Action history, entity filtering, compliance tracking
GRAPHQL_FEATURE_AUDIT_LOGS=true

# AI Feature (Experimental)
# Provides: AI/ML queries, mutations, subscriptions
# Includes: Chat, embeddings, recommendations (NOT YET IMPLEMENTED)
# WARNING: This feature is experimental and not production-ready
GRAPHQL_FEATURE_AI=false

# =============================================================================
# Example Configurations
# =============================================================================

# Minimal API (only reminders):
# GRAPHQL_FEATURE_REMINDERS=true
# GRAPHQL_FEATURE_TAGS=false
# GRAPHQL_FEATURE_FLAGS=false
# GRAPHQL_FEATURE_FILES=false
# GRAPHQL_FEATURE_WEBHOOKS=false
# GRAPHQL_FEATURE_AUDIT_LOGS=false
# GRAPHQL_FEATURE_AI=false

# Public API (no admin features):
# GRAPHQL_FEATURE_REMINDERS=true
# GRAPHQL_FEATURE_TAGS=true
# GRAPHQL_FEATURE_FLAGS=false    # Internal only
# GRAPHQL_FEATURE_FILES=true
# GRAPHQL_FEATURE_WEBHOOKS=false  # Internal only
# GRAPHQL_FEATURE_AUDIT_LOGS=false # Internal only
# GRAPHQL_FEATURE_AI=true

# Internal/Admin API (everything):
# GRAPHQL_FEATURE_REMINDERS=true
# GRAPHQL_FEATURE_TAGS=true
# GRAPHQL_FEATURE_FLAGS=true
# GRAPHQL_FEATURE_FILES=true
# GRAPHQL_FEATURE_WEBHOOKS=true
# GRAPHQL_FEATURE_AUDIT_LOGS=true
# GRAPHQL_FEATURE_AI=false

# Development (disable expensive features):
# GRAPHQL_FEATURE_REMINDERS=true
# GRAPHQL_FEATURE_TAGS=true
# GRAPHQL_FEATURE_FLAGS=true
# GRAPHQL_FEATURE_FILES=false     # Skip S3 in dev
# GRAPHQL_FEATURE_WEBHOOKS=false  # Skip external calls
# GRAPHQL_FEATURE_AUDIT_LOGS=true
# GRAPHQL_FEATURE_AI=false        # Skip AI APIs

# =============================================================================
# Other GraphQL Settings
# =============================================================================
# See core/settings/graphql.py for additional configuration options:
#
# GRAPHQL_ENABLED=true                         # Enable/disable entire GraphQL API
# GRAPHQL_PATH=/graphql                        # GraphQL endpoint path
# GRAPHQL_GRAPHQL_IDE=graphiql                 # IDE: graphiql, apollo-sandbox, pathfinder, playground, false
# GRAPHQL_DISABLE_PLAYGROUND=false             # Disable GraphQL IDE
# GRAPHQL_MAX_QUERY_DEPTH=10                   # Maximum query nesting depth
# GRAPHQL_MAX_COMPLEXITY=1000                  # Maximum query complexity score
# GRAPHQL_DEFAULT_PAGE_SIZE=50                 # Default pagination size
# GRAPHQL_MAX_PAGE_SIZE=100                    # Maximum pagination size
# GRAPHQL_SUBSCRIPTIONS_ENABLED=true           # Enable WebSocket subscriptions
# GRAPHQL_SUBSCRIPTION_KEEPALIVE_INTERVAL=30.0 # Keepalive ping interval (seconds)
# GRAPHQL_INTROSPECTION_ENABLED=true           # Enable schema introspection (disable in prod)
